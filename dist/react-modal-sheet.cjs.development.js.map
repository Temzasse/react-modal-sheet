{"version":3,"file":"react-modal-sheet.cjs.development.js","sources":["../src/utils.ts","../src/context.tsx","../src/hooks.tsx","../src/styles.ts","../src/sheet.tsx","../src/SheetContainer.tsx","../src/SheetContent.tsx","../src/SheetHeader.tsx","../src/SheetBackdrop.tsx","../src/index.tsx"],"sourcesContent":["export const isBrowser = typeof window !== 'undefined';\r\n\r\nexport const getClosest = (nums: number[], goal: number) => {\r\n  return nums.reduce((prev, curr) => {\r\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\r\n  });\r\n};\r\n\r\nconst highlightId = 'react-modal-sheet-highlight';\r\n\r\nexport function applyRootStyles(rootId: string) {\r\n  const body = document.querySelector('body') as HTMLBodyElement;\r\n  const root = document.querySelector(`#${rootId}`) as HTMLDivElement;\r\n\r\n  if (root) {\r\n    const p = 24;\r\n    const h = window.innerHeight;\r\n    const s = (h - p) / h;\r\n    body.style.backgroundColor = '#000';\r\n    root.style.overflow = 'hidden';\r\n    root.style.willChange = 'transform';\r\n    root.style.transition = 'transform 200ms linear';\r\n    root.style.transform = `translateY(calc(env(safe-area-inset-top) + ${p / 2}px)) scale(${s})`; // prettier-ignore\r\n    root.style.borderTopRightRadius = '10px';\r\n    root.style.borderTopLeftRadius = '10px';\r\n\r\n    // Add highlighed overlay to emphasize the modality effect\r\n    const highlight = document.createElement('div');\r\n    highlight.setAttribute('aria-hidden', 'true');\r\n    highlight.id = highlightId;\r\n    highlight.style.position = 'absolute';\r\n    highlight.style.top = '0px';\r\n    highlight.style.left = '0px';\r\n    highlight.style.bottom = '0px';\r\n    highlight.style.right = '0px';\r\n    highlight.style.opacity = '0';\r\n    highlight.style.transition = 'opacity 200ms linear';\r\n    highlight.style.backgroundColor = 'rgba(150, 150, 150, 0.1)';\r\n\r\n    root.appendChild(highlight);\r\n    requestAnimationFrame(() => (highlight.style.opacity = '1'));\r\n  }\r\n}\r\n\r\nexport function cleanupRootStyles(rootId: string) {\r\n  const body = document.querySelector('body') as HTMLBodyElement;\r\n  const root = document.getElementById(rootId) as HTMLDivElement;\r\n  const highlight = document.getElementById(highlightId) as HTMLDivElement;\r\n\r\n  function onTransitionEnd() {\r\n    root.style.removeProperty('overflow');\r\n    root.style.removeProperty('will-change');\r\n    root.style.removeProperty('transition');\r\n    body.style.removeProperty('background-color');\r\n    root.removeEventListener('transitionend', onTransitionEnd);\r\n    highlight.parentNode?.removeChild(highlight);\r\n  }\r\n\r\n  if (root && highlight) {\r\n    // Start animating back\r\n    root.style.removeProperty('border-top-right-radius');\r\n    root.style.removeProperty('border-top-left-radius');\r\n    root.style.removeProperty('transform');\r\n    highlight.style.opacity = '0';\r\n\r\n    // Remove temp properties after animation is finished\r\n    root.addEventListener('transitionend', onTransitionEnd);\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { SheetContextType } from './types';\r\n\r\nexport const SheetContext = React.createContext<SheetContextType | undefined>(\r\n  undefined\r\n);\r\n\r\nexport const useSheetContext = () => {\r\n  const context = React.useContext(SheetContext);\r\n  if (!context) throw Error('Sheet context error');\r\n  return context;\r\n};\r\n","import * as React from 'react';\r\n\r\nimport { SheetEvents } from './types';\r\nimport { applyRootStyles, cleanupRootStyles } from './utils';\r\n\r\nexport const useModalEffect = (isOpen: boolean, rootId?: string) => {\r\n  const prevOpen = usePrevious(isOpen);\r\n\r\n  // Automatically apply the iOS modal effect to the body when sheet opens/closes\r\n  React.useEffect(() => {\r\n    if (rootId && !prevOpen && isOpen) {\r\n      applyRootStyles(rootId);\r\n    } else if (rootId && !isOpen && prevOpen) {\r\n      cleanupRootStyles(rootId);\r\n    }\r\n  }, [isOpen, prevOpen]); // eslint-disable-line\r\n\r\n  // Make sure to cleanup modal styles on unmount\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (rootId && isOpen) cleanupRootStyles(rootId);\r\n    };\r\n  }, [isOpen]); // eslint-disable-line\r\n};\r\n\r\nexport const useEventCallbacks = (\r\n  isOpen: boolean,\r\n  callbacks: React.MutableRefObject<SheetEvents>\r\n) => {\r\n  const prevOpen = usePrevious(isOpen);\r\n  const didOpen = React.useRef(false);\r\n\r\n  // Because of AnimatePrecence we don't have access to latest isOpen value\r\n  // so we need to read and write to a ref to determine if we are\r\n  // opening or closing the sheet\r\n  const handleAnimationComplete = React.useCallback(() => {\r\n    if (!didOpen.current) {\r\n      callbacks.current.onOpenEnd?.();\r\n      didOpen.current = true;\r\n    } else {\r\n      callbacks.current.onCloseEnd?.();\r\n      didOpen.current = false;\r\n    }\r\n  }, [isOpen, prevOpen]); // eslint-disable-line\r\n\r\n  React.useEffect(() => {\r\n    if (!prevOpen && isOpen) {\r\n      callbacks.current.onOpenStart?.();\r\n    } else if (!isOpen && prevOpen) {\r\n      callbacks.current.onCloseStart?.();\r\n    }\r\n  }, [isOpen, prevOpen]); // eslint-disable-line\r\n\r\n  return { handleAnimationComplete };\r\n};\r\n\r\nconst usePrevious = <T,>(state: T): T | undefined => {\r\n  const ref = React.useRef<T>();\r\n\r\n  React.useEffect(() => {\r\n    ref.current = state;\r\n  });\r\n\r\n  return ref.current;\r\n};\r\n","import * as CSS from 'csstype';\r\n\r\nconst styles: { [key: string]: CSS.Properties } = {\r\n  wrapper: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    zIndex: 9999999,\r\n    overflow: 'hidden',\r\n  },\r\n  backdrop: {\r\n    zIndex: 1,\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: 'rgba(51, 51, 51, 0.5)',\r\n    touchAction: 'none', // Disable iOS body scrolling\r\n  },\r\n  container: {\r\n    zIndex: 2,\r\n    position: 'absolute',\r\n    left: 0,\r\n    bottom: 0,\r\n    width: '100%',\r\n    backgroundColor: '#fff',\r\n    borderTopRightRadius: '8px',\r\n    borderTopLeftRadius: '8px',\r\n    boxShadow: '0px -2px 16px rgba(0, 0, 0, 0.3)',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  headerWrapper: {\r\n    width: '100%',\r\n  },\r\n  header: {\r\n    height: '40px',\r\n    width: '100%',\r\n    position: 'relative',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  indicator: {\r\n    width: '18px',\r\n    height: '4px',\r\n    borderRadius: '99px',\r\n    backgroundColor: '#ddd',\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    overflow: 'auto',\r\n    position: 'relative',\r\n  },\r\n};\r\n\r\nexport default styles;\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\n\r\nimport {\r\n  useSpring,\r\n  useMotionValue,\r\n  AnimatePresence,\r\n  PanInfo,\r\n} from 'framer-motion';\r\n\r\nimport { SheetProps } from './types';\r\nimport { getClosest, isBrowser } from './utils';\r\nimport { SheetContext } from './context';\r\nimport { useModalEffect } from './hooks';\r\nimport styles from './styles';\r\n\r\nconst Sheet = React.forwardRef<any, SheetProps>(\r\n  (\r\n    {\r\n      children,\r\n      isOpen,\r\n      onClose,\r\n      onOpenStart,\r\n      onOpenEnd,\r\n      onCloseStart,\r\n      onCloseEnd,\r\n      onSnap,\r\n      snapPoints,\r\n      initialSnap = 0,\r\n      rootId,\r\n      springConfig = { stiffness: 300, damping: 30, mass: 0.2 },\r\n      disableDrag = false,\r\n      ...rest\r\n    },\r\n    ref\r\n  ) => {\r\n    const [mounted, setMounted] = React.useState(false);\r\n    const [isDragging, setDragging] = React.useState(false);\r\n    const sheetRef = React.useRef<any>(null);\r\n    const callbacks = React.useRef({ onOpenStart, onOpenEnd, onCloseStart, onCloseEnd }); // prettier-ignore\r\n    const indicatorRotation = useMotionValue(0);\r\n    const sheetDragY = useMotionValue(isBrowser ? window.innerHeight : 0);\r\n    const sheetSpringY = useSpring(sheetDragY, springConfig);\r\n    const y = isDragging ? sheetDragY : sheetSpringY;\r\n    const pointerEvents = isOpen ? 'auto' : 'none';\r\n\r\n    const handleDrag = React.useCallback((_, { delta }: PanInfo) => {\r\n      // Update drag indicator rotation based on drag velocity\r\n      const velocity = sheetDragY.getVelocity();\r\n      if (velocity > 0) indicatorRotation.set(10);\r\n      if (velocity < 0) indicatorRotation.set(-10);\r\n\r\n      // Make sure user cannot drag beyond the top of the sheet\r\n      sheetDragY.set(Math.max(sheetDragY.get() + delta.y, 0));\r\n    }, []); // eslint-disable-line\r\n\r\n    const handleDragStart = React.useCallback(() => {\r\n      // Sync the drag value with the spring value so that dragging start at the correct y position\r\n      sheetDragY.set(sheetSpringY.get());\r\n      setDragging(true);\r\n    }, []); // eslint-disable-line\r\n\r\n    const handleDragEnd = React.useCallback(\r\n      (_, { velocity }: PanInfo) => {\r\n        if (velocity.y > 500) {\r\n          // User flicked the sheet down\r\n          onClose();\r\n        } else {\r\n          const sheetEl = sheetRef.current as HTMLDivElement;\r\n          const contentHeight = sheetEl.getBoundingClientRect().height;\r\n          const snapTo = snapPoints\r\n            ? getClosest(\r\n                snapPoints.map(p => contentHeight - p),\r\n                sheetDragY.get()\r\n              )\r\n            : sheetDragY.get() / contentHeight > 0.6 // Close if dragged over 60%\r\n            ? contentHeight\r\n            : 0;\r\n\r\n          // Update the spring value so that the sheet is animated to the snap point\r\n          sheetSpringY.set(snapTo);\r\n\r\n          if (snapPoints && onSnap) {\r\n            const snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\r\n            const snapIndex = snapPoints.indexOf(snapValue);\r\n            onSnap(snapIndex);\r\n          }\r\n\r\n          if (snapTo >= contentHeight) onClose();\r\n\r\n          setDragging(false);\r\n        }\r\n\r\n        // Reset indicator rotation after dragging\r\n        indicatorRotation.set(0);\r\n      },\r\n      [onClose, onSnap] // eslint-disable-line\r\n    );\r\n\r\n    // Keep the callback fns up-to-date so that they can be accessed inside\r\n    // the effect without including them to the dependencies array\r\n    React.useEffect(() => {\r\n      callbacks.current = { onOpenStart, onOpenEnd, onCloseStart, onCloseEnd };\r\n    });\r\n\r\n    React.useEffect(() => {\r\n      setMounted(true);\r\n    }, []);\r\n\r\n    // Trigger onSnap callback when sheet is opened or closed\r\n    React.useEffect(() => {\r\n      if (!snapPoints || !onSnap || !mounted) return;\r\n      const snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\r\n      onSnap(snapIndex);\r\n    }, [isOpen]);\r\n\r\n    React.useImperativeHandle(ref, () => ({\r\n      snapTo: (snapIndex: number) => {\r\n        if (snapPoints && snapPoints[snapIndex] !== undefined) {\r\n          const sheetEl = sheetRef.current as HTMLDivElement;\r\n          const contentHeight = sheetEl.getBoundingClientRect().height;\r\n          const snapTo = contentHeight - snapPoints[snapIndex];\r\n\r\n          sheetSpringY.set(snapTo);\r\n          if (onSnap) onSnap(snapIndex);\r\n          if (snapTo >= contentHeight) onClose();\r\n        }\r\n      },\r\n    }));\r\n\r\n    useModalEffect(isOpen, rootId);\r\n\r\n    const dragProps = disableDrag\r\n      ? ({} as any)\r\n      : {\r\n          drag: 'y' as const,\r\n          dragElastic: 0,\r\n          dragConstraints: { top: 0, bottom: 0 },\r\n          dragMomentum: false,\r\n          onDrag: handleDrag,\r\n          onDragStart: handleDragStart,\r\n          onDragEnd: handleDragEnd,\r\n        };\r\n\r\n    const context = {\r\n      y,\r\n      sheetRef,\r\n      isOpen,\r\n      isDragging,\r\n      initialSnap,\r\n      snapPoints,\r\n      indicatorRotation,\r\n      callbacks,\r\n      dragProps,\r\n    };\r\n\r\n    const wrapperProps = {\r\n      ...rest,\r\n      ref,\r\n      style: {\r\n        ...styles.wrapper,\r\n        pointerEvents,\r\n      } as any,\r\n    };\r\n\r\n    return mounted ? (\r\n      ReactDOM.createPortal(\r\n        <SheetContext.Provider value={context}>\r\n          <div {...wrapperProps}>\r\n            <AnimatePresence>\r\n              {/* NOTE: AnimatePresence requires us to set keys to children */}\r\n              {isOpen\r\n                ? React.Children.map(children, (child: any, i) =>\r\n                    React.cloneElement(child, { key: `sheet-child-${i}` })\r\n                  )\r\n                : null}\r\n            </AnimatePresence>\r\n          </div>\r\n        </SheetContext.Provider>,\r\n        document.body\r\n      )\r\n    ) : (\r\n      // NOTE: return the wrapper div so that SSR frameworks don't get confused\r\n      // with the HTML structure (\"Expected server HTML to contain a matching <div>...\")\r\n      <div {...wrapperProps} />\r\n    );\r\n  }\r\n);\r\n\r\nexport default Sheet;\r\n","import * as React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport mergeRefs from 'react-merge-refs';\r\n\r\nimport { SheetContainerProps } from './types';\r\nimport { useSheetContext } from './context';\r\nimport { useEventCallbacks } from './hooks';\r\nimport styles from './styles';\r\n\r\nconst MAX_HEIGHT = 'calc(100% - env(safe-area-inset-top) - 34px)';\r\n\r\nconst SheetContainer = React.forwardRef<any, SheetContainerProps>(\r\n  ({ children, style = {}, ...rest }, ref) => {\r\n    const {\r\n      y,\r\n      isOpen,\r\n      callbacks,\r\n      snapPoints,\r\n      initialSnap = 0,\r\n      sheetRef,\r\n    } = useSheetContext();\r\n\r\n    const { handleAnimationComplete } = useEventCallbacks(isOpen, callbacks);\r\n    const initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\r\n    const h = snapPoints ? snapPoints[0] : null;\r\n    const sheetHeight = h ? `min(${h}px, ${MAX_HEIGHT})` : MAX_HEIGHT;\r\n\r\n    return (\r\n      <motion.div\r\n        {...rest}\r\n        ref={mergeRefs([sheetRef, ref])}\r\n        className=\"react-modal-sheet-container\"\r\n        style={{ ...styles.container, height: sheetHeight, ...style, y }}\r\n        initial={{ y: window.innerHeight }}\r\n        animate={{ y: initialY, transition: { type: 'tween' } }}\r\n        exit={{ y: window.innerHeight }}\r\n        onAnimationComplete={handleAnimationComplete}\r\n      >\r\n        {children}\r\n      </motion.div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default SheetContainer;\r\n","import * as React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nimport { SheetDraggableProps } from './types';\r\nimport styles from './styles';\r\nimport { useSheetContext } from './context';\r\n\r\nconst SheetContent = React.forwardRef<any, SheetDraggableProps>(\r\n  ({ children, disableDrag = false, style = {}, ...rest }, ref) => {\r\n    const { dragProps } = useSheetContext();\r\n\r\n    return (\r\n      <motion.div\r\n        {...rest}\r\n        ref={ref}\r\n        className=\"react-modal-sheet-content\"\r\n        style={{ ...styles.content, ...style }}\r\n        {...(disableDrag ? {} : dragProps)}\r\n      >\r\n        {children}\r\n      </motion.div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default SheetContent;\r\n","import * as React from 'react';\r\nimport { motion, useTransform } from 'framer-motion';\r\n\r\nimport { SheetDraggableProps } from './types';\r\nimport { useSheetContext } from './context';\r\nimport styles from './styles';\r\n\r\nconst SheetHeader = React.forwardRef<any, SheetDraggableProps>(\r\n  ({ children, disableDrag = false, style = {}, ...rest }, ref) => {\r\n    const { indicatorRotation, dragProps } = useSheetContext();\r\n\r\n    const indicator1Transform = useTransform(\r\n      indicatorRotation,\r\n      r => `translateX(2px) rotate(${r}deg)`\r\n    );\r\n\r\n    const indicator2Transform = useTransform(\r\n      indicatorRotation,\r\n      r => `translateX(-2px) rotate(${-1 * r}deg)`\r\n    );\r\n\r\n    return (\r\n      <motion.div\r\n        {...rest}\r\n        ref={ref}\r\n        style={{ ...styles.headerWrapper, ...style }}\r\n        {...(disableDrag ? {} : dragProps)}\r\n      >\r\n        {children || (\r\n          <div className=\"react-modal-sheet-header\" style={styles.header}>\r\n            <motion.span\r\n              className=\"react-modal-sheet-drag-indicator\"\r\n              style={{ ...styles.indicator, transform: indicator1Transform }}\r\n            />\r\n            <motion.span\r\n              className=\"react-modal-sheet-drag-indicator\"\r\n              style={{ ...styles.indicator, transform: indicator2Transform }}\r\n            />\r\n          </div>\r\n        )}\r\n      </motion.div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default SheetHeader;\r\n","import * as React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nimport { SheetBackdropProps } from './types';\r\nimport styles from './styles';\r\n\r\nconst isClickable = (props: any) => !!props.onClick || !!props.onTap;\r\n\r\nconst SheetBackdrop = React.forwardRef<any, SheetBackdropProps>(\r\n  ({ style = {}, ...rest }, ref) => {\r\n    const Comp = isClickable(rest) ? motion.button : motion.div;\r\n\r\n    return (\r\n      <Comp\r\n        {...rest}\r\n        ref={ref}\r\n        className=\"react-modal-sheet-backdrop\"\r\n        style={{ ...styles.backdrop, ...style }}\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nexport default SheetBackdrop;\r\n","import Sheet from './sheet';\r\nimport SheetContainer from './SheetContainer';\r\nimport SheetContent from './SheetContent';\r\nimport SheetHeader from './SheetHeader';\r\nimport SheetBackdrop from './SheetBackdrop';\r\n\r\nexport type SheetRef = {\r\n  snapTo: (index: number) => void;\r\n};\r\n\r\ntype SheetCompoundComponent = {\r\n  Container: typeof SheetContainer;\r\n  Header: typeof SheetHeader;\r\n  Content: typeof SheetContent;\r\n  Backdrop: typeof SheetBackdrop;\r\n};\r\n\r\n// HACK: this is needed to get the typing to work properly...\r\nconst _Sheet: any = Sheet;\r\n_Sheet.Container = SheetContainer;\r\n_Sheet.Header = SheetHeader;\r\n_Sheet.Content = SheetContent;\r\n_Sheet.Backdrop = SheetBackdrop;\r\n\r\nconst SheetCompound: typeof Sheet & SheetCompoundComponent = _Sheet;\r\n\r\nexport default SheetCompound;\r\n"],"names":["isBrowser","window","getClosest","nums","goal","reduce","prev","curr","Math","abs","highlightId","applyRootStyles","rootId","body","document","querySelector","root","p","h","innerHeight","s","style","backgroundColor","overflow","willChange","transition","transform","borderTopRightRadius","borderTopLeftRadius","highlight","createElement","setAttribute","id","position","top","left","bottom","right","opacity","appendChild","requestAnimationFrame","cleanupRootStyles","getElementById","onTransitionEnd","removeProperty","removeEventListener","parentNode","removeChild","addEventListener","SheetContext","React","undefined","useSheetContext","context","Error","useModalEffect","isOpen","prevOpen","usePrevious","useEventCallbacks","callbacks","didOpen","handleAnimationComplete","current","onOpenEnd","onCloseEnd","onOpenStart","onCloseStart","state","ref","styles","wrapper","zIndex","backdrop","width","height","touchAction","container","boxShadow","display","flexDirection","headerWrapper","header","alignItems","justifyContent","indicator","borderRadius","content","flex","Sheet","children","onClose","onSnap","snapPoints","initialSnap","springConfig","stiffness","damping","mass","disableDrag","rest","mounted","setMounted","isDragging","setDragging","sheetRef","indicatorRotation","useMotionValue","sheetDragY","sheetSpringY","useSpring","y","pointerEvents","handleDrag","_","delta","velocity","getVelocity","set","max","get","handleDragStart","handleDragEnd","sheetEl","contentHeight","getBoundingClientRect","snapTo","map","snapValue","round","snapIndex","indexOf","length","dragProps","drag","dragElastic","dragConstraints","dragMomentum","onDrag","onDragStart","onDragEnd","wrapperProps","ReactDOM","Provider","value","AnimatePresence","child","i","key","MAX_HEIGHT","SheetContainer","initialY","sheetHeight","motion","div","mergeRefs","className","initial","animate","type","exit","onAnimationComplete","SheetContent","SheetHeader","indicator1Transform","useTransform","r","indicator2Transform","span","isClickable","props","onClick","onTap","SheetBackdrop","Comp","button","_Sheet","Container","Header","Content","Backdrop","SheetCompound"],"mappings":"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"}