{"version":3,"file":"react-modal-sheet.cjs.production.min.js","sources":["../src/utils.ts","../src/context.tsx","../src/hooks.tsx","../src/styles.ts","../src/sheet.tsx","../src/SheetContainer.tsx","../src/SheetContent.tsx","../src/SheetHeader.tsx","../src/SheetBackdrop.tsx","../src/index.tsx"],"sourcesContent":["export const isBrowser = typeof window !== 'undefined';\r\n\r\nexport const getClosest = (nums: number[], goal: number) => {\r\n  return nums.reduce((prev, curr) => {\r\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\r\n  });\r\n};\r\n\r\nconst highlightId = 'react-modal-sheet-highlight';\r\n\r\nexport function applyRootStyles(rootId: string) {\r\n  const body = document.querySelector('body') as HTMLBodyElement;\r\n  const root = document.querySelector(`#${rootId}`) as HTMLDivElement;\r\n\r\n  if (root) {\r\n    const p = 24;\r\n    const h = window.innerHeight;\r\n    const s = (h - p) / h;\r\n    body.style.backgroundColor = '#000';\r\n    root.style.overflow = 'hidden';\r\n    root.style.willChange = 'transform';\r\n    root.style.transition = 'transform 200ms linear';\r\n    root.style.transform = `translateY(calc(env(safe-area-inset-top) + ${p / 2}px)) scale(${s})`; // prettier-ignore\r\n    root.style.borderTopRightRadius = '10px';\r\n    root.style.borderTopLeftRadius = '10px';\r\n\r\n    // Add highlighed overlay to emphasize the modality effect\r\n    const highlight = document.createElement('div');\r\n    highlight.setAttribute('aria-hidden', 'true');\r\n    highlight.id = highlightId;\r\n    highlight.style.position = 'absolute';\r\n    highlight.style.top = '0px';\r\n    highlight.style.left = '0px';\r\n    highlight.style.bottom = '0px';\r\n    highlight.style.right = '0px';\r\n    highlight.style.opacity = '0';\r\n    highlight.style.transition = 'opacity 200ms linear';\r\n    highlight.style.backgroundColor = 'rgba(150, 150, 150, 0.1)';\r\n\r\n    root.appendChild(highlight);\r\n    requestAnimationFrame(() => (highlight.style.opacity = '1'));\r\n  }\r\n}\r\n\r\nexport function cleanupRootStyles(rootId: string) {\r\n  const body = document.querySelector('body') as HTMLBodyElement;\r\n  const root = document.getElementById(rootId) as HTMLDivElement;\r\n  const highlight = document.getElementById(highlightId) as HTMLDivElement;\r\n\r\n  function onTransitionEnd() {\r\n    root.style.removeProperty('overflow');\r\n    root.style.removeProperty('will-change');\r\n    root.style.removeProperty('transition');\r\n    body.style.removeProperty('background-color');\r\n    root.removeEventListener('transitionend', onTransitionEnd);\r\n    highlight.parentNode?.removeChild(highlight);\r\n  }\r\n\r\n  if (root && highlight) {\r\n    // Start animating back\r\n    root.style.removeProperty('border-top-right-radius');\r\n    root.style.removeProperty('border-top-left-radius');\r\n    root.style.removeProperty('transform');\r\n    highlight.style.opacity = '0';\r\n\r\n    // Remove temp properties after animation is finished\r\n    root.addEventListener('transitionend', onTransitionEnd);\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { SheetContextType } from './types';\r\n\r\nexport const SheetContext = React.createContext<SheetContextType | undefined>(\r\n  undefined\r\n);\r\n\r\nexport const useSheetContext = () => {\r\n  const context = React.useContext(SheetContext);\r\n  if (!context) throw Error('Sheet context error');\r\n  return context;\r\n};\r\n","import * as React from 'react';\r\n\r\nimport { SheetEvents } from './types';\r\nimport { applyRootStyles, cleanupRootStyles } from './utils';\r\n\r\nexport const useModalEffect = (isOpen: boolean, rootId?: string) => {\r\n  const prevOpen = usePrevious(isOpen);\r\n\r\n  // Automatically apply the iOS modal effect to the body when sheet opens/closes\r\n  React.useEffect(() => {\r\n    if (rootId && !prevOpen && isOpen) {\r\n      applyRootStyles(rootId);\r\n    } else if (rootId && !isOpen && prevOpen) {\r\n      cleanupRootStyles(rootId);\r\n    }\r\n  }, [isOpen, prevOpen]); // eslint-disable-line\r\n\r\n  // Make sure to cleanup modal styles on unmount\r\n  React.useEffect(() => {\r\n    return () => {\r\n      if (rootId && isOpen) cleanupRootStyles(rootId);\r\n    };\r\n  }, [isOpen]); // eslint-disable-line\r\n};\r\n\r\nexport const useEventCallbacks = (\r\n  isOpen: boolean,\r\n  callbacks: React.MutableRefObject<SheetEvents>\r\n) => {\r\n  const prevOpen = usePrevious(isOpen);\r\n  const didOpen = React.useRef(false);\r\n\r\n  // Because of AnimatePrecence we don't have access to latest isOpen value\r\n  // so we need to read and write to a ref to determine if we are\r\n  // opening or closing the sheet\r\n  const handleAnimationComplete = React.useCallback(() => {\r\n    if (!didOpen.current) {\r\n      callbacks.current.onOpenEnd?.();\r\n      didOpen.current = true;\r\n    } else {\r\n      callbacks.current.onCloseEnd?.();\r\n      didOpen.current = false;\r\n    }\r\n  }, [isOpen, prevOpen]); // eslint-disable-line\r\n\r\n  React.useEffect(() => {\r\n    if (!prevOpen && isOpen) {\r\n      callbacks.current.onOpenStart?.();\r\n    } else if (!isOpen && prevOpen) {\r\n      callbacks.current.onCloseStart?.();\r\n    }\r\n  }, [isOpen, prevOpen]); // eslint-disable-line\r\n\r\n  return { handleAnimationComplete };\r\n};\r\n\r\nconst usePrevious = <T,>(state: T): T | undefined => {\r\n  const ref = React.useRef<T>();\r\n\r\n  React.useEffect(() => {\r\n    ref.current = state;\r\n  });\r\n\r\n  return ref.current;\r\n};\r\n","import * as CSS from 'csstype';\r\n\r\nconst styles: { [key: string]: CSS.Properties } = {\r\n  wrapper: {\r\n    position: 'absolute',\r\n    top: 0,\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    zIndex: 9999999,\r\n    overflow: 'hidden',\r\n  },\r\n  backdrop: {\r\n    zIndex: 1,\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: 'rgba(51, 51, 51, 0.5)',\r\n    touchAction: 'none', // Disable iOS body scrolling\r\n  },\r\n  container: {\r\n    zIndex: 2,\r\n    position: 'absolute',\r\n    left: 0,\r\n    bottom: 0,\r\n    width: '100%',\r\n    backgroundColor: '#fff',\r\n    borderTopRightRadius: '8px',\r\n    borderTopLeftRadius: '8px',\r\n    boxShadow: '0px -2px 16px rgba(0, 0, 0, 0.3)',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  headerWrapper: {\r\n    width: '100%',\r\n  },\r\n  header: {\r\n    height: '40px',\r\n    width: '100%',\r\n    position: 'relative',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n  indicator: {\r\n    width: '18px',\r\n    height: '4px',\r\n    borderRadius: '99px',\r\n    backgroundColor: '#ddd',\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    overflow: 'auto',\r\n    position: 'relative',\r\n  },\r\n};\r\n\r\nexport default styles;\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\n\r\nimport {\r\n  useSpring,\r\n  useMotionValue,\r\n  AnimatePresence,\r\n  PanInfo,\r\n} from 'framer-motion';\r\n\r\nimport { SheetProps } from './types';\r\nimport { getClosest, isBrowser } from './utils';\r\nimport { SheetContext } from './context';\r\nimport { useModalEffect } from './hooks';\r\nimport styles from './styles';\r\n\r\nconst Sheet = React.forwardRef<any, SheetProps>(\r\n  (\r\n    {\r\n      children,\r\n      isOpen,\r\n      onClose,\r\n      onOpenStart,\r\n      onOpenEnd,\r\n      onCloseStart,\r\n      onCloseEnd,\r\n      onSnap,\r\n      snapPoints,\r\n      initialSnap = 0,\r\n      rootId,\r\n      springConfig = { stiffness: 300, damping: 30, mass: 0.2 },\r\n      disableDrag = false,\r\n      ...rest\r\n    },\r\n    ref\r\n  ) => {\r\n    const [mounted, setMounted] = React.useState(false);\r\n    const [isDragging, setDragging] = React.useState(false);\r\n    const sheetRef = React.useRef<any>(null);\r\n    const callbacks = React.useRef({ onOpenStart, onOpenEnd, onCloseStart, onCloseEnd }); // prettier-ignore\r\n    const indicatorRotation = useMotionValue(0);\r\n    const sheetDragY = useMotionValue(isBrowser ? window.innerHeight : 0);\r\n    const sheetSpringY = useSpring(sheetDragY, springConfig);\r\n    const y = isDragging ? sheetDragY : sheetSpringY;\r\n    const pointerEvents = isOpen ? 'auto' : 'none';\r\n\r\n    const handleDrag = React.useCallback((_, { delta }: PanInfo) => {\r\n      // Update drag indicator rotation based on drag velocity\r\n      const velocity = sheetDragY.getVelocity();\r\n      if (velocity > 0) indicatorRotation.set(10);\r\n      if (velocity < 0) indicatorRotation.set(-10);\r\n\r\n      // Make sure user cannot drag beyond the top of the sheet\r\n      sheetDragY.set(Math.max(sheetDragY.get() + delta.y, 0));\r\n    }, []); // eslint-disable-line\r\n\r\n    const handleDragStart = React.useCallback(() => {\r\n      // Sync the drag value with the spring value so that dragging start at the correct y position\r\n      sheetDragY.set(sheetSpringY.get());\r\n      setDragging(true);\r\n    }, []); // eslint-disable-line\r\n\r\n    const handleDragEnd = React.useCallback(\r\n      (_, { velocity }: PanInfo) => {\r\n        if (velocity.y > 500) {\r\n          // User flicked the sheet down\r\n          onClose();\r\n        } else {\r\n          const sheetEl = sheetRef.current as HTMLDivElement;\r\n          const contentHeight = sheetEl.getBoundingClientRect().height;\r\n          const snapTo = snapPoints\r\n            ? getClosest(\r\n                snapPoints.map(p => contentHeight - p),\r\n                sheetDragY.get()\r\n              )\r\n            : sheetDragY.get() / contentHeight > 0.6 // Close if dragged over 60%\r\n            ? contentHeight\r\n            : 0;\r\n\r\n          // Update the spring value so that the sheet is animated to the snap point\r\n          sheetSpringY.set(snapTo);\r\n\r\n          if (snapPoints && onSnap) {\r\n            const snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\r\n            const snapIndex = snapPoints.indexOf(snapValue);\r\n            onSnap(snapIndex);\r\n          }\r\n\r\n          if (snapTo >= contentHeight) onClose();\r\n\r\n          setDragging(false);\r\n        }\r\n\r\n        // Reset indicator rotation after dragging\r\n        indicatorRotation.set(0);\r\n      },\r\n      [onClose, onSnap] // eslint-disable-line\r\n    );\r\n\r\n    // Keep the callback fns up-to-date so that they can be accessed inside\r\n    // the effect without including them to the dependencies array\r\n    React.useEffect(() => {\r\n      callbacks.current = { onOpenStart, onOpenEnd, onCloseStart, onCloseEnd };\r\n    });\r\n\r\n    React.useEffect(() => {\r\n      setMounted(true);\r\n    }, []);\r\n\r\n    // Trigger onSnap callback when sheet is opened or closed\r\n    React.useEffect(() => {\r\n      if (!snapPoints || !onSnap || !mounted) return;\r\n      const snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\r\n      onSnap(snapIndex);\r\n    }, [isOpen]);\r\n\r\n    React.useImperativeHandle(ref, () => ({\r\n      snapTo: (snapIndex: number) => {\r\n        if (snapPoints && snapPoints[snapIndex] !== undefined) {\r\n          const sheetEl = sheetRef.current as HTMLDivElement;\r\n          const contentHeight = sheetEl.getBoundingClientRect().height;\r\n          const snapTo = contentHeight - snapPoints[snapIndex];\r\n\r\n          sheetSpringY.set(snapTo);\r\n          if (onSnap) onSnap(snapIndex);\r\n          if (snapTo >= contentHeight) onClose();\r\n        }\r\n      },\r\n    }));\r\n\r\n    useModalEffect(isOpen, rootId);\r\n\r\n    const dragProps = disableDrag\r\n      ? ({} as any)\r\n      : {\r\n          drag: 'y' as const,\r\n          dragElastic: 0,\r\n          dragConstraints: { top: 0, bottom: 0 },\r\n          dragMomentum: false,\r\n          onDrag: handleDrag,\r\n          onDragStart: handleDragStart,\r\n          onDragEnd: handleDragEnd,\r\n        };\r\n\r\n    const context = {\r\n      y,\r\n      sheetRef,\r\n      isOpen,\r\n      isDragging,\r\n      initialSnap,\r\n      snapPoints,\r\n      indicatorRotation,\r\n      callbacks,\r\n      dragProps,\r\n    };\r\n\r\n    const wrapperProps = {\r\n      ...rest,\r\n      ref,\r\n      style: {\r\n        ...styles.wrapper,\r\n        pointerEvents,\r\n      } as any,\r\n    };\r\n\r\n    return mounted ? (\r\n      ReactDOM.createPortal(\r\n        <SheetContext.Provider value={context}>\r\n          <div {...wrapperProps}>\r\n            <AnimatePresence>\r\n              {/* NOTE: AnimatePresence requires us to set keys to children */}\r\n              {isOpen\r\n                ? React.Children.map(children, (child: any, i) =>\r\n                    React.cloneElement(child, { key: `sheet-child-${i}` })\r\n                  )\r\n                : null}\r\n            </AnimatePresence>\r\n          </div>\r\n        </SheetContext.Provider>,\r\n        document.body\r\n      )\r\n    ) : (\r\n      // NOTE: return the wrapper div so that SSR frameworks don't get confused\r\n      // with the HTML structure (\"Expected server HTML to contain a matching <div>...\")\r\n      <div {...wrapperProps} />\r\n    );\r\n  }\r\n);\r\n\r\nexport default Sheet;\r\n","import * as React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport mergeRefs from 'react-merge-refs';\r\n\r\nimport { SheetContainerProps } from './types';\r\nimport { useSheetContext } from './context';\r\nimport { useEventCallbacks } from './hooks';\r\nimport styles from './styles';\r\n\r\nconst MAX_HEIGHT = 'calc(100% - env(safe-area-inset-top) - 34px)';\r\n\r\nconst SheetContainer = React.forwardRef<any, SheetContainerProps>(\r\n  ({ children, style = {}, ...rest }, ref) => {\r\n    const {\r\n      y,\r\n      isOpen,\r\n      callbacks,\r\n      snapPoints,\r\n      initialSnap = 0,\r\n      sheetRef,\r\n    } = useSheetContext();\r\n\r\n    const { handleAnimationComplete } = useEventCallbacks(isOpen, callbacks);\r\n    const initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\r\n    const h = snapPoints ? snapPoints[0] : null;\r\n    const sheetHeight = h ? `min(${h}px, ${MAX_HEIGHT})` : MAX_HEIGHT;\r\n\r\n    return (\r\n      <motion.div\r\n        {...rest}\r\n        ref={mergeRefs([sheetRef, ref])}\r\n        className=\"react-modal-sheet-container\"\r\n        style={{ ...styles.container, height: sheetHeight, ...style, y }}\r\n        initial={{ y: window.innerHeight }}\r\n        animate={{ y: initialY, transition: { type: 'tween' } }}\r\n        exit={{ y: window.innerHeight }}\r\n        onAnimationComplete={handleAnimationComplete}\r\n      >\r\n        {children}\r\n      </motion.div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default SheetContainer;\r\n","import * as React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nimport { SheetDraggableProps } from './types';\r\nimport styles from './styles';\r\nimport { useSheetContext } from './context';\r\n\r\nconst SheetContent = React.forwardRef<any, SheetDraggableProps>(\r\n  ({ children, disableDrag = false, style = {}, ...rest }, ref) => {\r\n    const { dragProps } = useSheetContext();\r\n\r\n    return (\r\n      <motion.div\r\n        {...rest}\r\n        ref={ref}\r\n        className=\"react-modal-sheet-content\"\r\n        style={{ ...styles.content, ...style }}\r\n        {...(disableDrag ? {} : dragProps)}\r\n      >\r\n        {children}\r\n      </motion.div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default SheetContent;\r\n","import * as React from 'react';\r\nimport { motion, useTransform } from 'framer-motion';\r\n\r\nimport { SheetDraggableProps } from './types';\r\nimport { useSheetContext } from './context';\r\nimport styles from './styles';\r\n\r\nconst SheetHeader = React.forwardRef<any, SheetDraggableProps>(\r\n  ({ children, disableDrag = false, style = {}, ...rest }, ref) => {\r\n    const { indicatorRotation, dragProps } = useSheetContext();\r\n\r\n    const indicator1Transform = useTransform(\r\n      indicatorRotation,\r\n      r => `translateX(2px) rotate(${r}deg)`\r\n    );\r\n\r\n    const indicator2Transform = useTransform(\r\n      indicatorRotation,\r\n      r => `translateX(-2px) rotate(${-1 * r}deg)`\r\n    );\r\n\r\n    return (\r\n      <motion.div\r\n        {...rest}\r\n        ref={ref}\r\n        style={{ ...styles.headerWrapper, ...style }}\r\n        {...(disableDrag ? {} : dragProps)}\r\n      >\r\n        {children || (\r\n          <div className=\"react-modal-sheet-header\" style={styles.header}>\r\n            <motion.span\r\n              className=\"react-modal-sheet-drag-indicator\"\r\n              style={{ ...styles.indicator, transform: indicator1Transform }}\r\n            />\r\n            <motion.span\r\n              className=\"react-modal-sheet-drag-indicator\"\r\n              style={{ ...styles.indicator, transform: indicator2Transform }}\r\n            />\r\n          </div>\r\n        )}\r\n      </motion.div>\r\n    );\r\n  }\r\n);\r\n\r\nexport default SheetHeader;\r\n","import * as React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nimport { SheetBackdropProps } from './types';\r\nimport styles from './styles';\r\n\r\nconst isClickable = (props: any) => !!props.onClick || !!props.onTap;\r\n\r\nconst SheetBackdrop = React.forwardRef<any, SheetBackdropProps>(\r\n  ({ style = {}, ...rest }, ref) => {\r\n    const Comp = isClickable(rest) ? motion.button : motion.div;\r\n\r\n    return (\r\n      <Comp\r\n        {...rest}\r\n        ref={ref}\r\n        className=\"react-modal-sheet-backdrop\"\r\n        style={{ ...styles.backdrop, ...style }}\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n      />\r\n    );\r\n  }\r\n);\r\n\r\nexport default SheetBackdrop;\r\n","import Sheet from './sheet';\r\nimport SheetContainer from './SheetContainer';\r\nimport SheetContent from './SheetContent';\r\nimport SheetHeader from './SheetHeader';\r\nimport SheetBackdrop from './SheetBackdrop';\r\n\r\nexport type SheetRef = {\r\n  snapTo: (index: number) => void;\r\n};\r\n\r\ntype SheetCompoundComponent = {\r\n  Container: typeof SheetContainer;\r\n  Header: typeof SheetHeader;\r\n  Content: typeof SheetContent;\r\n  Backdrop: typeof SheetBackdrop;\r\n};\r\n\r\n// HACK: this is needed to get the typing to work properly...\r\nconst _Sheet: any = Sheet;\r\n_Sheet.Container = SheetContainer;\r\n_Sheet.Header = SheetHeader;\r\n_Sheet.Content = SheetContent;\r\n_Sheet.Backdrop = SheetBackdrop;\r\n\r\nconst SheetCompound: typeof Sheet & SheetCompoundComponent = _Sheet;\r\n\r\nexport default SheetCompound;\r\n"],"names":["isBrowser","window","cleanupRootStyles","rootId","body","document","querySelector","root","getElementById","highlight","style","removeProperty","opacity","addEventListener","onTransitionEnd","removeEventListener","parentNode","removeChild","SheetContext","React","undefined","useSheetContext","context","Error","usePrevious","state","ref","current","styles","wrapper","position","top","bottom","left","right","zIndex","overflow","backdrop","width","height","backgroundColor","touchAction","container","borderTopRightRadius","borderTopLeftRadius","boxShadow","display","flexDirection","headerWrapper","header","alignItems","justifyContent","indicator","borderRadius","content","flex","Sheet","children","isOpen","onClose","onOpenStart","onOpenEnd","onCloseStart","onCloseEnd","onSnap","snapPoints","initialSnap","springConfig","stiffness","damping","mass","disableDrag","rest","mounted","setMounted","isDragging","setDragging","sheetRef","callbacks","indicatorRotation","useMotionValue","sheetDragY","innerHeight","sheetSpringY","useSpring","y","pointerEvents","handleDrag","_","delta","velocity","getVelocity","set","Math","max","get","handleDragStart","handleDragEnd","nums","goal","contentHeight","getBoundingClientRect","snapTo","map","p","reduce","prev","curr","abs","snapValue","round","snapIndex","indexOf","length","prevOpen","h","s","willChange","transition","transform","createElement","setAttribute","id","appendChild","requestAnimationFrame","applyRootStyles","useModalEffect","dragProps","drag","dragElastic","dragConstraints","dragMomentum","onDrag","onDragStart","onDragEnd","wrapperProps","ReactDOM","Provider","value","AnimatePresence","child","i","key","MAX_HEIGHT","SheetContainer","handleAnimationComplete","didOpen","useEventCallbacks","initialY","sheetHeight","motion","div","mergeRefs","className","initial","animate","type","exit","onAnimationComplete","SheetContent","SheetHeader","indicator1Transform","useTransform","r","indicator2Transform","span","SheetBackdrop","props","Comp","onClick","onTap","button","_Sheet","Container","Header","Content","Backdrop"],"mappings":"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"}